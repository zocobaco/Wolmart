"use strict";window.wolmart_vc_studio_delay=1500,function(e){var t=!1;function o(){var o="",a=!1,l="e";e(document.body).find("#wpb_visual_composer").length>0&&(l="w"),setTimeout((function(){e(document.body).find("#vc_navbar").length>0&&(l="w")}),1e3),e(document.body).hasClass("vc_inline-shortcode-edit-form")&&(l="w");var s=1;function r(t,o){if(t&&t.content)if("undefined"!=typeof vc&&vc.storage)vc.storage.append(t.content),vc.shortcodes.fetch({reset:!0}),_.delay((function(){window.vc.undoRedoApi.unlock()}),50);else if(window.vc_iframe_src){var a={action:"vc_frontend_load_template",block_id:o,content:t.content,wpnonce:wolmart_studio.wpnonce,template_unique_id:"1",template_type:"my_templates",vc_inline:!0,_vcnonce:window.vcAdminNonce};t.meta&&(a.meta=t.meta),e.ajax({url:window.vc_iframe_src.replace(/&amp;/g,"&"),type:"post",data:a,success:function(t){var o,a;_.each(e(t),(function(e){if("vc_template-data"===e.id)try{a=JSON.parse(e.innerHTML)}catch(e){}"vc_template-html"===e.id&&(o=e.innerHTML)})),o&&a&&(vc.builder.buildFromTemplate(o,a),vc.closeActivePanel())}})}t&&t.meta&&(t.meta.page_css&&e(".postbox-container #wpb_visual_composer").length>0&&(e("#vc_post-custom-css").val(e("#vc_post-custom-css").val()+t.meta.page_css),e("#vc_ui-panel-post-settings").css("display","none"),e("#vc_post-settings-button").trigger("click"),e("#vc_ui-panel-post-settings .vc_ui-panel-footer .vc_ui-button-fw").trigger("click"),e("#vc_ui-panel-post-settings").css("display","")),t.meta.page_js&&e("#page_js").length>0&&e("#page_js").val(e("#page_js").val()+t.meta.page_js),window.vc_iframe_src&&(void 0===wolmart_studio.meta_fields&&(wolmart_studio.meta_fields={}),t.meta.page_css&&(e("#vc_post-custom-css").val(e("#vc_post-custom-css").val()+t.meta.page_css),e("#vc_ui-panel-post-settings").css("display","none"),e("#vc_post-settings-button").trigger("click"),e("#vc_ui-panel-post-settings .vc_ui-panel-footer .vc_ui-button-fw").trigger("click"),e("#vc_ui-panel-post-settings").css("display","")),t.meta.page_js&&(void 0===wolmart_studio.meta_fields.page_js&&(wolmart_studio.meta_fields.page_js=""),-1===wolmart_studio.meta_fields.page_js.indexOf(t.meta.page_js)&&(wolmart_studio.meta_fields.page_js+=t.meta.page_js)))),t&&t.error&&alert(t.error)}function i(o){if(o){if(o.content){var a=function(e){Array.isArray(e)&&e.forEach((function(t,o){t.elements&&a(t.elements),t.elType&&(e[o].id=elementorCommon.helpers.getUniqueId())}))};if(Array.isArray(o.content)){var l=!0;o.content.forEach((function(e){if("widget"!=e.elType)return l=!1,!1})),l?o.content=[{elType:"section",elements:[{elType:"column",elements:o.content}]}]:o.content.forEach((function(e,t){"widget"==e.elType?o.content[t]={elType:"section",elements:[{elType:"column",elements:e}]}:"column"==e.elType&&(o.content[t]={elType:"section",elements:e})}))}a(o.content),elementor.getPreviewView().addChildModel(o.content,t&&t.parent().hasClass("elementor-section-wrap")?(t.find(".elementor-add-section-close").trigger("click"),{at:t.index()}):{}),elementor.saver&&elementor.saver.footerSaver&&elementor.saver.footerSaver.activateSaveButtons?elementor.saver.footerSaver.activateSaveButtons(document,"publish"):$e.run("document/save/publish")}if(o.meta)for(var s in o.meta){var r=o.meta[s].replace("/<script.*?/script>/s",""),i=elementor.settings.page.model.get(s);void 0===i&&(i=""),i&&-1!==i.indexOf(r)||elementor.settings.page.model.set(s,i+r),"page_css"==s&&(elementorFrontend.hooks.doAction("refresh_page_css",i+r),e('textarea[data-setting="page_css"]').val(i+r))}o.error&&alert(o.error)}}function n(t,o,a){if(t.preventDefault(),e(".blocks-wrapper").hasClass("loading"))return!1;var r=e(this);if("I"==t.target.tagName)return r.siblings("ul").stop().slideToggle(200),r.children("i").toggleClass("w-icon-chevron-down w-icon-chevron-up"),!1;if(r.hasClass("active")&&!r.parent().hasClass("filtered")&&(void 0===o||1==o))return!1;var i=e(".blocks-wrapper .blocks-list"),n=e(".blocks-wrapper .block-categories");if(void 0!==r.data("filter-by")||r.parent(".filtered").length){if((s=void 0===o?1:parseInt(o,10))>1){if(!n.hasClass("hide"))return;e(".blocks-wrapper").addClass("infiniteloading")}n.hasClass("hide")||(i.isotope("remove",i.children()),n.addClass("hide")),i.siblings(".coming-soon").remove();var c={action:"wolmart_studio_filter_category",category_id:r.data("filter-by"),wpnonce:wolmart_studio.wpnonce,page:s,type:l};void 0!==a&&(c.demo_filter=a),e(document.body).hasClass("elementor-editor-active")||e(document.body).hasClass("vcv-wb-editor")||e(document.body).hasClass("vc_inline-shortcode-edit-form")||e(document.body).find("#wpb_visual_composer").length>0||e(document.body).find("#vc_navbar").length>0||(c.new_template=!0),e(".blocks-wrapper .block-category-favourites.active").length&&s>1&&(c.current_count=i.data("isotope").items.length),e(".blocks-wrapper").addClass("loading"),e.ajax({url:ajaxurl,type:"post",dataType:"html",data:c,success:function(t){if("error"!=t){var o=e(t);if(void 0!==a){var l=o.filter("#total_pages").text();r.data("total-page",l?parseInt(l,10):1),o=o.filter(".block")}else e(".blocks-wrapper .btn").prop("disabled",!1);1===s&&i.isotope("remove",i.children()),e(".blocks-wrapper .category-list a").removeClass("active"),r.addClass("active"),o.imagesLoaded((function(){i.append(o).isotope("appended",o).isotope("layout"),e(".blocks-wrapper").removeClass("loading").removeClass("infiniteloading"),e(".blocks-wrapper .blocks-section").trigger("scroll")}))}else e(".blocks-wrapper").removeClass("loading").removeClass("infiniteloading")}}).fail((function(){alert(wolmart_studio.texts.loading_failed),e(".blocks-wrapper").removeClass("loading").removeClass("infiniteloading")}))}else r.hasClass("all")?(n.removeClass("hide"),i.siblings(".coming-soon").remove()):(n.addClass("hide"),i.isotope("remove",i.children()).css("height",""),i.siblings(".coming-soon").length||i.before('<div class="coming-soon">'+wolmart_studio.texts.coming_soon+"</div>")),e(".blocks-wrapper .category-list a").removeClass("active"),r.addClass("active")}function c(t,o,a){var s=e.ajax({url:ajaxurl,type:"post",dataType:"json",data:{action:"wolmart_studio_import",block_id:t,wpnonce:wolmart_studio.wpnonce,type:l,mine:"my"==e(".blocks-wrapper .category-list a.active").data("filter-by")},success:function(e){"e"==l?i(e):"v"==l?window.wolmartVCMergeContent(e):r(e,t),a&&a.addClass("imported")},failure:function(){alert(wolmart_studio.texts.importing_error)}});o&&s.always(o)}function p(t){t.preventDefault();var o=e(this),a=o.closest(".block");o.attr("disabled","disabled"),a.addClass("doing"),c(o.parent().data("id"),(function(){o.prop("disabled",!1),a.removeClass("doing")}),a)}function d(){var t=e(this),o=e(this).parent().data("category");parseInt(o)?36==o?e(".wolmart-new-template-form .template-type").val("header"):37==o?e(".wolmart-new-template-form .template-type").val("footer"):10==o?e(".wolmart-new-template-form .template-type").val("product_layout"):11==o?e(".wolmart-new-template-form .template-type").val("popup"):e(".wolmart-new-template-form .template-type").val("block"):e(".wolmart-new-template-form .template-type").val(o),e(".blocks-wrapper .block.selected").removeClass("selected"),e("#wolmart-new-template-id").val(t.parent().data("id")),e(".blocks-wrapper .block-category-my-templates.active").length?e("#wolmart-new-template-type").val("my"):e("#wolmart-elementor-studio").is(":checked")?e("#wolmart-new-template-type").val("e"):e("#wolmart-wpbakery-studio").is(":checked")?e("#wolmart-new-template-type").val("w"):e("#wolmart-new-template-type").val("v"),e("#wolmart-new-template-name").val(t.closest(".block").addClass("selected").find(".block-title").text()),b()}function m(){var t=e(this),o=t.closest(".block").addClass("doing"),a=e(".blocks-wrapper .blocks-list"),r=e(".blocks-wrapper .block-category-favourites span"),i={action:"wolmart_studio_favour_block",wpnonce:wolmart_studio.wpnonce,block_id:t.parent().data("id"),type:l,active:o.hasClass("favour")?0:1};e(".blocks-wrapper .block-category-favourites.active").length&&(i.current_count=a.data("isotope").items.length),e.post(ajaxurl,i,(function(t){o.toggleClass("favour");var l=parseInt(r.text().replace("(","").replace(")",""))+(o.hasClass("favour")?1:-1);if(r.text("("+l+")").parent().data("total-page",Math.ceil(l/wolmart_studio.limit)),void 0!==i.current_count){var n=e(t);a.isotope("remove",o),t&&t.trim()&&a.append(n).isotope("appended",n),a.isotope("layout"),s=Math.ceil(i.current_count/wolmart_studio.limit)}})).always((function(){o.removeClass("doing")}))}function u(t){0==e(".postbox-container #wpb_visual_composer").length&&wolmart_studio.meta_fields&&vc_post_id&&e.ajax({url:ajaxurl,type:"post",dataType:"json",data:{action:"wolmart_studio_save",post_id:vc_post_id,nonce:wolmart_studio.wpnonce,fields:wolmart_studio.meta_fields}})}function w(){e(".blocks-wrapper .block.selected").removeClass("selected"),e("#wolmart-new-template-id").val(""),e("#wolmart-new-template-type").val(""),e("#wolmart-new-template-name").val("")}function v(){o!=e(this).val()?e(".demo-filter .btn").prop("disabled",!1):e(".demo-filter .btn").attr("disabled","disabled")}function g(t,a){t.preventDefault();var s=e(this),r="",i=[];void 0===a&&(a=1),o=s.closest(".demo-filter").find(".filter-select").val(),s.closest(".demo-filter").find(".filter-select").val()&&(r="","v"==l?r="vc-":"w"==l&&(r="wpb-"),i[0]=r+s.closest(".demo-filter").find(".filter-select").val()),i.length?e(".blocks-wrapper .filtered>a").trigger("click",[a,i]):e(".blocks-wrapper .all").trigger("click"),s.attr("disabled","disabled")}function f(t){this.getAttribute("data-category")&&e(".blocks-wrapper .block-category-"+this.getAttribute("data-category")).trigger("click"),t.preventDefault()}function b(){e(".blocks-wrapper, .blocks-overlay, .layout-builder").addClass("closed")}function k(){var t=e(this),o=t.addClass("active").data("column");t.siblings().removeClass("active"),e(".blocks-wrapper .blocks-list").removeClass("column-2 column-3 column-4").addClass(parseInt(o)>1?"column-"+o:"").isotope("layout")}function y(t){if(t.preventDefault(),a)e(".blocks-wrapper, .blocks-overlay").removeClass("closed");else{if(e("#wolmart_studio_blocks_wrapper_template").after(e("#wolmart_studio_blocks_wrapper_template").text()).remove(),e(".blocks-wrapper .blocks-list").length&&e(document.body).on("click",".blocks-wrapper .category-list a",n).on("click",".blocks-wrapper .blocks-list .import",p).on("click",".blocks-wrapper .blocks-list .select",d).on("click",".blocks-wrapper .blocks-list .favourite",m).on("click",".blocks-wrapper .mfp-close, .layout-builder .mfp-close, .blocks-overlay",b).on("click",".blocks-wrapper .block-category",f).on("click","#vc_button-update",u).on("change",".blocks-wrapper .demo-filter .filter-select",v).on("click",".blocks-wrapper .demo-filter .btn",g).on("change","#wolmart-elementor-studio",w).on("change","#wolmart-wpbakery-studio",w).on("click",".blocks-wrapper .layout-buttons > button",k),e(this).hasClass("disabled"))return!1;e(this).addClass("disabled"),e(".blocks-wrapper img[data-original]").each((function(){e(this).attr("src",e(this).data("original")),e(this).removeAttr("data-original")})),e(".blocks-wrapper").imagesLoaded((function(){e("#wolmart-elementor-panel-wolmart-studio, #vce-wolmart-studio-trigger, #wpb-wolmart-studio-trigger, #wolmart-new-studio-trigger").removeClass("disabled"),e(".blocks-wrapper, .blocks-overlay").removeClass("closed"),setTimeout((function(){e(".blocks-wrapper .blocks-list").hasClass("initialized")||(e(".blocks-wrapper .blocks-list").addClass("initialized").isotope({itemSelector:".block",layoutMode:"masonry"}),e(".blocks-wrapper .blocks-section").on("scroll",(function(){var t=e(this),o=t.closest(".blocks-wrapper");if(o.length&&(t.children().offset().top+t.children().height()-t.offset().top-t.height()<=10&&!o.hasClass("loading")&&parseInt(o.find(".category-list a.active").data("total-page"),10)>=s+1)){var a=o.find(".category-list a.active").data("filter-by");parseInt(a,10)||"blocks"==a||"*"==a||"my"==a?o.find(".category-list a.active").trigger("click",[s+1]):"all"!=a&&o.find(".demo-filter .btn").trigger("click",[s+1])}})),e(".blocks-wrapper .blocks-section").trigger("scroll")),e(".blocks-wrapper .blocks-list").isotope("layout")}),100)}))}a=!0}e(document.body).on("click","#wolmart-elementor-panel-wolmart-studio, #vce-wolmart-studio-trigger, #wpb-wolmart-studio-trigger",y).on("click","#wolmart-elementor-panel-wolmart-display-condition",(function(t){t.preventDefault(),e(".layout-builder").length||(e(document.body).on("click",".blocks-wrapper .mfp-close, .layout-builder .mfp-close, .blocks-overlay",b),e("#wolmart_studio_blocks_wrapper_template").after(e("#wolmart_studio_blocks_wrapper_template").text()).remove()),e(".layout-builder, .blocks-overlay").removeClass("closed")})).on("click","#wolmart-new-studio-trigger",(function(t){if("e"==wolmart_studio.page_type||"v"==wolmart_studio.page_type||"w"==wolmart_studio.page_type)l=wolmart_studio.page_type;else{var o="";o=e("#wolmart-elementor-studio").is(":checked")?"e":e("#wolmart-wpbakery-studio").is(":checked")?"w":"v",l!=o&&(l=o,e(".blocks-wrapper").addClass("loading"),e.ajax({url:ajaxurl,type:"post",dataType:"html",data:{action:"wolmart_studio_filter_category",wpnonce:wolmart_studio.wpnonce,page:1,type:l,full_wrapper:!0,new_template:!0},success:function(t){if("error"!=t){var o=e(t),a=e("blocks-wrapper .blocks-list");a.hasClass("initialized")&&a.isotope("remove",a.children()).css("height",""),e(".blocks-wrapper .block-categories.hide").removeClass("hide"),e(".blocks-wrapper .category-list").html(o.find(".category-list").html()),e(".blocks-wrapper .filter-select").html(o.find(".filter-select").html())}e(".blocks-wrapper").removeClass("loading")}}).fail((function(){alert(wolmart_studio.texts.loading_failed),e(".blocks-wrapper").removeClass("loading")})))}y.call(this,t)})),wolmart_studio.start_template&&c(parseInt(wolmart_studio.start_template)),wolmart_studio.start_template_content&&("e"==l?i(wolmart_studio.start_template_content):"v"==l?wolmartVCMergeContent(wolmart_studio.start_template_content):r(wolmart_studio.start_template_content))}e(document).ready((function(){e(document.body).hasClass("elementor-editor-active")&&"undefined"!=typeof elementor?(window.runStudio=function(o){e("#wolmart-elementor-panel-wolmart-studio").trigger("click"),o&&(t=e(o).closest(".elementor-add-section"))},elementor.on("document:loaded",o)):e(document.body).hasClass("vcv-wb-editor")?e(window).on("init_wolmart_settings",(function(){setTimeout(o,window.wolmart_vc_studio_delay)})):e(window).load(o)}))}(jQuery);