"use strict";window.WolmartAdmin=window.WolmartAdmin||{},function(t){var o={init:function(){for(var t in this.conditions=JSON.parse(JSON.stringify(wolmart_layout_vars.conditions))||{},this.schemes=wolmart_layout_vars.schemes||{},this.clipboard=!1,this.controls=[],wolmart_layout_vars.controls)if(!t.startsWith("content"))for(var o in wolmart_layout_vars.controls[t])this.controls.push(o)},getConditions:function(t="",o=-1){return t?(this.conditions[t]||(this.conditions[t]=[]),o>=0&&this.conditions[t][o]?this.conditions[t][o]:this.conditions[t]):this.conditions},getOptionValues:function(t,o){return!(!this.conditions[t]||!this.conditions[t][o])&&this.conditions[t][o].options},getConditionTitle:function(t,o){return t&&this.schemes[t]?o?this.schemes[t].layout_title:this.schemes[t].title:""},getConditionDescription:function(t){return t&&this.schemes[t]?this.schemes[t].layout_description:""},setConditionTitle:function(t,o,e){this.conditions[t][o]&&(this.conditions[t][o].title=e),this.requireSave()},getScheme:function(t,o=""){return o?this.schemes[t].scheme[o]:this.schemes[t].scheme},getOptionControls:function(t){return!!wolmart_layout_vars.controls[t]&&wolmart_layout_vars.controls[t]},getTemplates:function(t){return wolmart_layout_vars.templates[t]},canExtendCondition:function(t,o=""){return!!(t&&this.schemes[t]&&this.schemes[t].scheme)&&(!o||this.schemes[t].scheme[o]&&(this.schemes[t].scheme[o].list||this.schemes[t].scheme[o].ajaxselect))},updateCategoryUI:function(o=""){var e=function(o){var e=t(".wolmart-condition-cat-"+o+"> .wolmart-condition-count"),i=this.conditions[o].filter((function(t){return t})).length;e.text(i),i?e.slideDown():e.slideUp()}.bind(this);o&&e(o);var i=0;for(var a in this.conditions)i+=this.conditions[a].filter((function(t){return t})).length,o||e(a);t(".wolmart-condition-cat-site > .wolmart-condition-count").text(i).slideDown()},addCondition:function(t){this.conditions[t]||(this.conditions[t]=[]);var o={};return o.title=this.getConditionTitle(t,!0)+" "+(this.conditions[t].length+1),o.scheme={},this.schemes[t].scheme&&this.schemes[t].scheme.all&&(o.scheme.all=!0),this.conditions[t].push(o),this.updateCategoryUI(t),this.requireSave(),this.conditions[t].length-1},deleteCondition:function(o,e){void 0!==this.conditions[o][e]&&(this.conditions[o].splice(e,1),t(".wolmart-layout-item[data-category="+o+"]").each((function(){var o=this.getAttribute("data-condition-no");o>e&&(this.setAttribute("data-condition-no",o-1),t(this).data("condition-no",o-1))})),t("#wolmart_layout_content").isotope("updateSortData").isotope()),this.updateCategoryUI(o),this.requireSave()},duplicateCondition:function(o,e){if(o&&"number"==typeof e&&this.conditions[o][e]){var i=JSON.parse(JSON.stringify(this.conditions[o][e]));return t(".wolmart-layout-item[data-category="+o+"]").each((function(){var o=this.getAttribute("data-condition-no");o>e&&(this.setAttribute("data-condition-no",1*o+1),t(this).data("condition-no",1*o+1))})),this.conditions[o].splice(e,0,i),this.updateCategoryUI(o),this.requireSave(),e+1}},copyOptions:function(t,o){this.clipboard={category:t,options:this.getOptionValues(t,o)}},pasteOptions:function(t,o,i){if(this.clipboard){if(t==this.clipboard.category)this.conditions[t][o]?this.conditions[t][o].options=this.clipboard.options:this.conditions[t][o]={options:this.clipboard.options};else{if(this.conditions[t][o].options)for(var a in this.conditions[t][o].options)this.controls.indexOf(a)&&delete this.conditions[t][o].options[a];else this.conditions[t][o].options={};for(var a in this.clipboard.options)this.controls.indexOf(a)&&(this.conditions[t][o].options[a]=this.clipboard.options[a])}e.refreshLayoutStatus(i),this.requireSave()}},requireSave:function(){t(".wolmart-layouts-save").addClass("require-save")},setConditionScheme:function(t,o,e,i,a){if(void 0===this.conditions[o][e])(n={})[i]=a,n.all=!0,this.conditions[o][e]={scheme:n};else if(this.conditions[o][e]){var n;if(!this.conditions[o][e].scheme)(n={})[i]=a,this.conditions[o][e].scheme=n;a?this.conditions[o][e].scheme[i]=a:delete this.conditions[o][e].scheme[i]}t.addClass("edited"),this.requireSave()},setConditionList:function(t,o,e,i){this.conditions[t][o]=i?{type:e,list:i}:{type:e},this.requireSave()},setConditionOption:function(t,o,e,i){this.conditions[t][o].options||(this.conditions[t][o].options={}),i?this.conditions[t][o].options[e]=i:delete this.conditions[t][o].options[e],this.requireSave()},save:function(){t(".wolmart-layouts-save").removeClass("require-save"),void 0!==window.top.wolmart_core_vars.layout_save&&(window.top.wolmart_core_vars.layout_save=!1),t.post(wolmart_core_vars.ajax_url,{action:"wolmart_layout_builder_save",nonce:wolmart_core_vars.nonce,conditions:this.conditions},(function(){var o=window.top.document.querySelector(".layout-builder");t(o).length&&(t(o).addClass("closed"),t(o).siblings(".blocks-overlay").addClass("closed"))})).fail((function(){t(".wolmart-layouts-save").addClass("require-save"),t(".wolmart-modal-message").remove(),t(".wolmart-layouts-save").before('<span class="wolmart-modal-message"></span>')}))}},e={init:function(){this.buttonDelete='<button class="wolmart-condition-button wolmart-condition-delete w-icon-trash-alt"></button>',this.buttonDuplicate='<button class="wolmart-condition-button wolmart-condition-duplicate w-icon-clone"></button>',this.buttonSet='<button class="wolmart-condition-button wolmart-condition-set w-icon-cog2"></button>',this.layoutBoxTemplate=t("#wolmart_layout_template").text(),t("#wolmart_layout_template").remove(),t(document.body).on("click",".wolmart-layouts-save",this.onSave).on("contextmenu",".wolmart-layout-item",this.onContextMenu.bind(this)).on("click","#wolmart_layout_content",this.closeContextMenu).on("click",".wolmart-condition-menu > a",this.clickContextMenuItem).on("click",".wolmart-condition-copy",this.copyOptions).on("click",".wolmart-condition-paste",this.pasteOptions).on("click",".wolmart-condition-edit-back",this.goBackFromEdit).on("click",".wolmart-condition-cat",this.clickCategory.bind(this)).on("click",".wolmart-layout-more",this.addCondition.bind(this)).on("click",".wolmart-condition-delete",this.deleteCondition.bind(this)).on("click",".wolmart-condition-duplicate",this.duplicateCondition.bind(this)).on("change",".wolmart-scheme-options > div > label input[type=checkbox]",this.changeConditionScheme.bind(this)).on("change",".wolmart-scheme-list",this.changeConditionItem).on("input",".wolmart-condition-title",this.changeConditionTitle.bind(this)).on("click",".wolmart-layout .layout-part",this.editPart).on("click",".wolmart-condition-set",this.editCondition).on("click",".manage-conditions",this.editCondition).on("click",this.clickOther.bind(this)).on("change",".wolmart-block-select input",this.changeBlockMode.bind(this)).on("change",".wolmart-layout-options input",this.changeOptionInput.bind(this)).on("change",".wolmart-layout-options select",this.changeOptionInput.bind(this)),this.setupLayouts()},refreshUI:function(o){o&&"layout"!=o&&"add"!=o||t("#wolmart_layout_content").isotope(),o&&"add"!=o||this.refreshLayoutStatus()},refreshLayoutStatus:function(e){e||(e=t("#wolmart_layout_content")),e.is(".wolmart-layout-item")||(e=e.find(".wolmart-layout-item")),e.each((function(){var i=t(this),a=i.data("category"),n=i.data("conditionNo"),l=o.getOptionValues(a,n);if(l)for(var s in wolmart_layout_vars.controls)if(o.controls.indexOf(s)){var r=o.getOptionControls(s),c=i.find('.layout-part[data-part="'+s+'"]'),d=!1;for(var u in c.removeClass("set layout-hide"),c.children(".block-value").text(""),r)if(l[u]){d=!0;break}if(e.closest(".wolmart-layouts-container.display-conditions").length&&("content_single_product"==s?s="single_product_block":"content_archive_product"==s?s="shop_block":"content_cart"==s?s="cart_block":"content_checkout"==s?s="checkout_block":-1!=s.indexOf("content_single_")?s="single_block":-1!=s.indexOf("content_archive_")?s="archive_block":"general"==s&&(s="popup")),r[s]&&"hide"==l[s])c.addClass("layout-hide");else if(d&&(c.addClass("set"),r[s])){var m=o.getTemplates(r[s].type.replace("block_",""));m&&m[l[s]]&&c.children(".block-value").text(m[l[s]])}}}))},setupLayouts:function(){var e="",i=o.schemes;if(i){for(var a in i){var n=o.getConditions(a);for(var l in n)e+=this.getNewConditionUI(a,l);"site"==a||!o.canExtendCondition(a)&&n.length||(e+=this.getAddMoreUI(a))}t("#wolmart_layout_content").html(e).isotope({layoutMode:"fitRows",filter:".wolmart-layout-item",sortBy:["category","no"],originLeft:!(t(document.body).hasClass("rtl")||t(".wolmart-layout_builder").length&&"rtl"==t(".alpha-layout_builder").css("direction")),getSortData:{category:function(t){var e=t.getAttribute("data-category");return Object.keys(o.schemes).indexOf(e)},no:function(t){return parseInt(t.getAttribute("data-condition-no"))}}}),o.updateCategoryUI(),this.refreshUI()}},refreshCondition:function(o,e){var i=".wolmart-layout-item",a=this;o&&(i+='[data-category="'+o+'"]'),e&&(i+='[data-condition-no="'+e+'"]'),t(i).each((function(){a.editPart({currentTarget:t(this).find(".layout-part.active").get(0)})}))},onSave:function(){o.save()},onContextMenu:function(e){this.closeContextMenu();var i=t(e.currentTarget),a=t(".wolmart-admin-panel-content"),n=a.get(0).getBoundingClientRect(),l=i.data("category"),s='<div class="wolmart-condition-menu" style="left:'+(e.clientX-n.x+a.scrollLeft())+"px;top:"+(e.clientY-n.y+a.scrollTop())+'px;">',r='<a href="#" class="wolmart-condition-';s+=r+'copy"><i class="w-icon-copy"></i>'+wolmart_layout_vars.text_copy+"</a>",o.clipboard&&(s+=r+'paste"><i class="w-icon-paste"></i>'+wolmart_layout_vars.text_paste+"</a>"),o.canExtendCondition(l)&&(s+=r+'duplicate"><i class="w-icon-clone"></i>'+wolmart_layout_vars.text_duplicate+"</a>"),s+=r+'set"><i class="w-icon-cog2"></i>'+wolmart_layout_vars.text_options+"</a>",s+=r+'delete"><i class="w-icon-trash-alt"></i>'+wolmart_layout_vars.text_delete+"</a>",s+="</div>",a.append(s),t(".wolmart-condition-menu").data("item",i),e.preventDefault()},closeContextMenu:function(){t(".wolmart-condition-menu").remove()},clickContextMenuItem:function(t){t.preventDefault()},copyOptions:function(e){var i=t(e.currentTarget).parent().data("item");o.copyOptions(i.data("category"),i.data("condition-no"))},pasteOptions:function(e){var i=t(e.currentTarget).parent().data("item");o.pasteOptions(i.data("category"),i.data("condition-no"),i)},clickCategory:function(o){var e=t(o.currentTarget).addClass("active"),i=e.data("category");e.siblings(".active").removeClass("active"),t("#wolmart_layout_content").isotope({filter:"site"==i?".wolmart-layout-item":'[data-category="'+i+'"]'})},getAddMoreUI:function(t){return'<div class="wolmart-layout-more-wrap" data-category="'+t+'" data-condition-no="999"><div class="wolmart-layout-more"><div class="wolmart-layout-more-inner"><i class="wolmart-icon-plus"></i>'+wolmart_layout_vars.text_create_layout+"<b>"+o.getConditionTitle(t)+"</b></div></div></div>"},getNewConditionUI:function(e,i=-1){-1==i&&(i=o.addCondition(e));var a=o.getConditions(e,i);if(a){var n="",l="";if(o.canExtendCondition(e)){var s,r=o.getScheme(e),c=a.scheme||{},d=0===e.indexOf("single_"),u=0===e.indexOf("archive_");for(var m in n+='<div class="wolmart-scheme-options"><label class="apply-text">'+wolmart_layout_vars.text_apply_prefix+o.getConditionTitle(e,!0).toLowerCase()+wolmart_layout_vars.text_apply_suffix+"</label>",r){var h="";s="wolmart-scheme-"+m,c&&c.all&&"all"==m||c[m]||(s+=" disabled"),n+='<div class="'+s+'" data-scheme="'+m+'">',n+='<label><input type="checkbox"'+(c[m]?" checked":"")+">"+r[m].title+"</label>";var p=r[m].list,v=r[m].title;if(void 0!==r[m].description?v=r[m].description:d?v=r[m].title+" "+wolmart_layout_vars.text_single_prefix:u&&(v=wolmart_layout_vars.text_archive_prefix),p){n+='<select multiple class="wolmart-scheme-list" data-placeholder="'+r[m].placeholder+'">';var y="";for(var _ in p){var w="object"==typeof c[m]&&(void 0!==c[m][_]||void 0!==c[m][1*_]);n+='<option value="'+_+'"'+(w?" selected":"")+">"+p[_]+"</option>",w&&(y+=y?", "+p[_]:p[_])}-1===s.indexOf("disabled")&&(y?h=u?"<li>"+v+" "+r[m].title+" "+wolmart_layout_vars.text_single_prefix+" "+y+"</li>":"<li>"+v+" "+y+"</li>":u&&(h="<li>"+v+" "+r[m].title+"</li>")),n+="</select>"}else if(r[m].ajaxselect){var f="child"==m?"page":m;f="page"==f?"page_ex":f;var g=c[m],b=g;Array.isArray(g)?(b="",c[m].forEach((function(t){t&&(b+=b?", "+t:t)})),g=c[m].join(",")):"object"==typeof g&&(b="",Object.values(g).forEach((function(t){t&&(b+=b?", "+t:t)})),g=Object.keys(g).join(",")),n+='<select multiple class="wolmart-scheme-list ajaxselect2" data-placeholder="'+r[m].placeholder+'" data-load-option="'+f+'"'+(c[m]?' data-values="'+g+'"':"")+">",n+="</select>",void 0!==g&&(d?1!=g&&"true"!=g&&(h="<li>"+v+" "+b+"</li>"):h="<li>"+v+r[m].title+" "+wolmart_layout_vars.text_single_prefix+" "+b+"</li>")}else c[m]&&(h="<li>"+r[m].title+"</li>");("all"==m||void 0===c.all||void 0!==c.all&&!c.all)&&(l+=h),n+="</div>"}n+="</div>",l&&(l="<ul>"+l+"</ul>")}else l="site"==e?o.getConditionDescription(e):"<ul><li>"+o.getConditionDescription(e)+"</li></ul>";var x=!o.getOptionControls("content_"+e);return this.layoutBoxTemplateReplaced=this.layoutBoxTemplate.replace('class="layout-part content" data-part="content"','class="layout-part content'+(x?" disabled":"")+'" data-part="content_'+e+'"'),"archive_product"!=e&&(this.layoutBoxTemplateReplaced=this.layoutBoxTemplateReplaced.replace('class="layout-part top-sidebar sidebar"','class="layout-part top-sidebar sidebar disabled"')),'<div class="wolmart-layout-item wolmart-layout-item-'+e+'" data-category="'+e+'" data-condition-no="'+i+'"><div class="wolmart-condition"><span class="wolmart-condition-edit-back w-icon-long-arrow-'+(t(document.body).hasClass("rtl")?"right":"left")+'"></span><span class="wolmart-condition-title" contenteditable="true">'+(a.title?a.title:o.getConditionTitle(e,!0))+"</span>"+(o.canExtendCondition(e)?this.buttonDuplicate+this.buttonSet:"")+("site"==e?"":this.buttonDelete)+'</div><div class="wolmart-condition-layout">'+this.layoutBoxTemplateReplaced+'<div class="wolmart-layout-options"><div></div></div>'+n+'</div><div class="wolmart-condition-disp">'+(l||'<ul class="no-condition"><li>'+wolmart_layout_vars.text_no_condition+"</li></ul>")+(o.canExtendCondition(e)?'<span class="manage-conditions">'+wolmart_layout_vars.text_manage_conditions+"</span>":"")+"</div></div>"}},addCondition:function(){var e=t(".wolmart-condition-cat.active").data("category")||"site",i=t(this.getNewConditionUI(e));o.canExtendCondition(e)||t('.wolmart-layout-more-wrap[data-category="'+e+'"]').remove(),t("#wolmart_layout_content").append(i).isotope("appended",i),this.refreshUI("add")},duplicateCondition:function(e){var i,a=t(e.currentTarget),n=(i=a.is(".wolmart-condition-menu > a")?a.parent().data("item"):a.closest(".wolmart-layout-item")).data("category"),l=o.duplicateCondition(n,i.data("condition-no")),s=t(this.getNewConditionUI(n,l));t("#wolmart_layout_content").append(s).isotope("appended",s).isotope("updateSortData"),this.refreshUI("add")},deleteCondition:function(e){if(confirm(wolmart_layout_vars.text_confirm_delete_condition)){var i,a=t(e.currentTarget),n=(i=a.is(".wolmart-condition-menu > a")?a.parent().data("item"):a.closest(".wolmart-layout-item")).data("category");if("site"!=n){if(o.deleteCondition(n,i.data("condition-no")),i.remove(),!o.canExtendCondition(n)){var l=t(this.getAddMoreUI(n));t("#wolmart_layout_content").append(l).isotope("appended",l)}this.refreshUI("layout")}}},changeConditionScheme:function(e){var i=t(e.currentTarget),a=i.closest(".wolmart-scheme-options>div"),n=a.data("scheme"),l=a.closest(".wolmart-layout-item"),s=l.data("category"),r=l.data("condition-no"),c=i.is(":checked");a.toggleClass("disabled",!c),o.setConditionScheme(l,s,r,n,c),c?i.closest("label").siblings(".wolmart-scheme-list").length&&i.closest("label").siblings(".wolmart-scheme-list").trigger("change",[!0]):a.hasClass("wolmart-scheme-all")&&a.siblings().find("input").trigger("change")},changeConditionItem:function(e,i){var a=t(e.currentTarget),n=a.closest(".wolmart-scheme-options>div"),l=n.closest(".wolmart-layout-item"),s=l.data("category"),r=l.data("condition-no"),c=n.data("scheme"),d=a.val(),u={};if(d.length)for(var m in d)u[d[m]]=a.find("[value="+d[m]+"]").text();o.canExtendCondition(s,c)&&"object"==typeof d&&(i&&!Object.keys(u).length||o.setConditionScheme(l,s,r,c,Object.keys(u).length?u:0===s.indexOf("archive_")))},changeConditionTitle:function(e){var i=t(e.currentTarget),a=i.closest(".wolmart-layout-item"),n=a.data("category"),l=a.data("condition-no");o.setConditionTitle(n,l,i.text())},editPart:function(e){var i=t(e.currentTarget);if(!i.hasClass("disabled")){var a=i.data("part"),n=i.closest(".wolmart-layout").next(".wolmart-layout-options").children(),l="",s=i.closest(".wolmart-layout-item"),r=s.data("category"),c=s.data("condition-no"),d=o.getOptionControls(a),u=o.getOptionValues(r,c);if(d){var m=[];for(var h in d){var p;do{p=Math.floor(65535*Math.random())}while(m.indexOf(p)>=0);m.push(p);var v="_wolmart_"+a+"_"+h+p,y=d[h],_="",w=u&&void 0!==u[h]?u[h]:"";if(y.description?_+='<div class="wolmart-layout-desc"><label>'+y.label+"</label><p>"+y.description+"</p></div>":_+='<label for="'+v+'" class="wolmart-layout-desc">'+y.label+"</label>","buttonset"==y.type){var f="";for(var f in _+='<input type="radio" id="'+v+"_"+f+'" name="'+v+'" value=""'+(""==w?" checked":"")+' class="radio-default">',_+='<label for="'+v+"_"+f+'" class="label-default w-icon-redo"'+(w?"":' checked="true"')+"></label>",_+='<div class="wolmart-radio-button-set">',y.options)_+='<input type="radio" id="'+v+"_"+f+'" name="'+v+'" value="'+f+'"'+(f==w?" checked":"")+">",_+='<label for="'+v+"_"+f+'" class="wolmart_'+a+"_"+h+"_"+f+'">'+y.options[f]+"</label>";_+="</div>"}else if("image"==y.type){f="";for(var f in _+='<input type="radio" id="'+v+"_"+f+'" name="'+v+'" value=""'+(""==w?" checked":"")+' class="radio-default">',_+='<label for="'+v+"_"+f+'" class="label-default w-icon-redo"'+(w?"":' checked="true"')+"></label>",_+='<div class="wolmart-radio-image-set">',y.options)_+='<input type="radio" id="'+v+"_"+f+'" name="'+v+'" value="'+f+'"'+(f==w?" checked":"")+">",_+='<label for="'+v+"_"+f+'" class="wolmart_'+a+"_"+h+"_"+f+'">',_+='<img src="'+wolmart_layout_vars.layout_images_url+y.options[f].image+'" title="'+y.options[f].title+'">',_+="</label>";_+="</div>"}else if(y.type.startsWith("block")){var g=o.getTemplates(y.type.replace("block_",""));if(_+='<div class="wolmart-block-select'+(w&&"hide"!=w?"":" inactive-my")+'">',_+='<div class="wolmart-radio-button-set">',_+='<input type="radio" name="'+v+'" id="'+v+'_" value=""'+(w?"":" checked")+">",_+='<label class="w-icon-redo" for="'+v+'_" title="'+wolmart_layout_vars.text_default+'"></label>',_+='<input type="radio" name="'+v+'" id="'+v+'_hide" value="hide"'+("hide"==w?" checked":"")+">",_+='<label class="w-icon-eye-slash"for="'+v+'_hide"  title="'+wolmart_layout_vars.text_hide+'"></label>',_+='<input type="radio" name="'+v+'" id="'+v+'_my" value="my"'+(w&&"hide"!=w?" checked":"")+">",_+='<label class="w-icon-layer-group" for="'+v+'_my" title="'+wolmart_layout_vars.text_my_templates+'"></label>',_+="</div>",!w&&-1!==location.search.indexOf("is_elementor_preview")){var b=window.location.search.substring(1).split("&"),x={};b.forEach((function(t){let o=t.split("=");x[o[0]]=o[1]})),void 0!==x.post&&(w=x.post)}for(var C in _+='<select class="wolmart-layout-part-select wolmart-layout-part-control" id="'+v+'" name="'+v+'">',g)_+='<option value="'+C+'"'+(w==C?" selected":"")+">"+g[C]+"</option>";_+="</select>",_+="</div>"}else if("number"==y.type){if(w){var k=w;void 0!==y.min&&(k=Math.max(y.min,k)),void 0!==y.max&&(k=Math.min(y.max,k)),w!=k&&o.setConditionOption(r,c,h,k)}_+='<input type="number" class="wolmart-layout-part-control" name="'+v+'" id="'+v+'"'+(void 0===y.min?"":' min="'+y.min+'"')+(void 0===y.max?"":' max="'+y.max+'"')+' step="1" value="'+w+'">'}else if("select"==y.type){for(var f in _+='<select class="wolmart-layout-part-select wolmart-layout-part-control" id="'+v+'" name="'+v+'">',y.options)_+='<option value="'+f+'"'+(f==w?" selected":"")+">"+y.options[f]+"</option>";_+="</select>"}else if("text"==y.type)_+='<input type="text" name="'+v+'" class="wolmart-layout-part-input wolmart-layout-part-control" id="'+v+'" value="'+w+'"></input>';else if("toggle"==y.type)_+='<div class="wolmart-radio-button-set">',_+='<input type="radio" name="'+v+'" id="'+v+'_" value=""'+(w?"":" checked")+">",_+='<label class="w-icon-redo" for="'+v+'_" title="'+wolmart_layout_vars.text_default+'"></label>',_+='<input type="radio" name="'+v+'" id="'+v+'_no" value="no"'+("no"==w?" checked":"")+">",_+='<label class="w-icon-eye-slash" for="'+v+'_no"></label>',_+='<input type="radio" name="'+v+'" id="'+v+'_yes" value="yes"'+("yes"==w?" checked":"")+">",_+='<label class="w-icon-check2"for="'+v+'_yes"></label>',_+="</div>";else if("multicheck"==y.type){if(_+="<ul>",y.options)for(var f in y.options)_+='<li><label><input type="checkbox" name="'+v+'[]" value="'+f+'">'+y.options[f]+"</label></li>";_+="</ul>"}var O=!0;"single_product_template"!=h||u&&"builder"==u.single_product_type||(O=!1),l+='<div class="wolmart-layout-control" '+(O?"":' style="display:none"')+'data-option="'+h+'">'+_+"</div>"}}n.html(l),s.addClass("edit")}},editCondition:function(o){var e,i=t(o.currentTarget);(e=i.is(".wolmart-condition-menu > a")?i.parent().data("item"):i.closest(".wolmart-layout-item")).hasClass("edit-condition")?(setTimeout((function(){e.find(".wolmart-scheme-list").each((function(){var o=t(this);o.data("select2")&&(o.hasClass("ajaxselect2")||o.select2("destroy"))}))}),300),t(window).trigger("wolmart_condition_edited")):e.find(".wolmart-scheme-list:not(.select2-hidden-accessible)").each((function(){var o=t(this);if((o=t(this)).hasClass("ajaxselect2")){var e=o.data("load-option"),i=o.data("values"),a=wolmart_layout_vars.site_url+"/wp-json/ajaxselect2/v1/"+e+"/";o.select2({placeholder:o.attr("data-placeholder"),ajax:{url:a,dataType:"json",data:function(t){return{s:t.term}}},cache:!0}),t.ajax({url:a,dataType:"json",data:{ids:i||""}}).then((function(t){null!==t&&t.results.length>0&&(jQuery.each(t.results,(function(t,e){var i=new Option(e.text,e.id,!0,!0);o.append(i)})),o.trigger({type:"select2:select",params:{data:t}}))}))}else o.select2({placeholder:o.attr("data-placeholder")})})),e.toggleClass("edit-condition")},clickOther:function(o){var e=t(o.target);e.closest(".select2-container").length||e.closest(".wolmart-layout-item").length||e.closest(".wolmart-condition-set").length||!e.is("body *")||(t(".wolmart-layout-item.edit").removeClass("edit"),t(".wolmart-layout-item.edit-condition").removeClass("edit-condition"),setTimeout((function(){t(".wolmart-layout-item .wolmart-scheme-list").each((function(){var o=t(this);o.data("select2")&&(o.hasClass("ajaxselect2")||o.select2("destroy"))}))}),300),t(window).trigger("wolmart_condition_edited")),this.closeContextMenu()},goBackFromEdit:function(o){var e=t(o.currentTarget).parent(".wolmart-scheme-options");e.length?(e.hide(),setTimeout((function(){e.show()}),100)):(t(o.currentTarget).closest(".wolmart-layout-item").removeClass("edit edit-condition"),t(window).trigger("wolmart_condition_edited"))},changeBlockMode:function(e){var i=e.currentTarget,a=t(i),n=a.closest(".wolmart-layout-item");a.closest(".wolmart-block-select").toggleClass("inactive-my","my"!=i.value),i.name.startsWith("_wolmart_")&&o.setConditionOption(n.data("category"),n.data("condition-no"),a.closest(".wolmart-layout-control").data("option"),i.value),this.refreshLayoutStatus(n)},changeOptionInput:function(e){var i=t(e.currentTarget),a=i.val(),n=i.closest(".wolmart-block-select"),l=e.currentTarget.name;if(n.length&&"my"==e.currentTarget.value&&(a=n.find("select").val()),l.startsWith("_wolmart_")&&(o.setConditionOption(i.closest(".wolmart-layout-item").data("category"),i.closest(".wolmart-layout-item").data("condition-no"),i.closest(".wolmart-layout-control").data("option"),a),l.indexOf("single_product_type")>=0)){var s=i.closest(".wolmart-layout-options").find('.wolmart-layout-control[data-option="single_product_template"]');s.length&&s.toggle("builder"==a)}this.refreshLayoutStatus(t(e.currentTarget).closest(".wolmart-layout-item"))}},i={init:function(){t("#wolmart_layout_content").length&&"undefined"!=typeof wolmart_layout_vars&&(this.model.init(),this.view.init(),t(window).on("wolmart_condition_edited",this.refreshCondition))},refreshCondition:function(){t(".wolmart-layout-item.edited").length&&(t(".wolmart-layout-item.edited").each((function(){var e=t(this),i=e.find(".wolmart-condition-disp"),a=e.attr("data-category"),n=e.attr("data-condition-no"),l=o.getScheme(a),s=o.getConditions(a,n),r=0===a.indexOf("single_"),c=0===a.indexOf("archive_"),d="";if(void 0!==s.scheme){for(var u in s=s.scheme){var m=!1,h="";void 0!==s.all&&s.all&&"all"!=u&&(m=!0);var p=l[u].list,v=l[u].title;void 0!==l[u].description?v=l[u].description:r?v=l[u].title+" "+wolmart_layout_vars.text_single_prefix:c&&(v=wolmart_layout_vars.text_archive_prefix);var y="object"==typeof s[u]&&void 0===s[u][0];if(p){if(!m){var _="";if("object"==typeof s[u])for(var w in s[u]){var f=y?s[u][w]:p[s[u][w]];_+=_?", "+f:f}_?h=c?"<li>"+v+" "+l[u].title+" "+wolmart_layout_vars.text_single_prefix+" "+_+"</li>":"<li>"+v+" "+_+"</li>":c&&(h="<li>"+v+" "+l[u].title+"</li>")}}else if(l[u].ajaxselect){var g=s[u];Array.isArray(g)?g=s[u].join(", "):"object"==typeof g&&(g=Object.values(g).join(", ")),g&&(r?1!=g&&"true"!=g&&(h="<li>"+v+" "+g+"</li>"):h="<li>"+v+l[u].title+" "+wolmart_layout_vars.text_single_prefix+" "+g+"</li>")}else s[u]&&(h="<li>"+l[u].title+"</li>");("all"==u||void 0===s.all||void 0!==s.all&&!s.all)&&(d+=h)}d&&(d="<ul>"+d+"</ul>"),i.html((d||'<ul class="no-condition"><li>'+wolmart_layout_vars.text_no_condition+"</li></ul>")+(o.canExtendCondition(a)?'<span class="manage-conditions">'+wolmart_layout_vars.text_manage_conditions+"</span>":""))}})),t("#wolmart_layout_content").isotope("layout"))},view:e,model:o};WolmartAdmin.LayoutBuilder=i,t(document).ready((function(){i.init(),-1!=location.href.indexOf("noheader")&&t(document.body).addClass("alpha-admin-page").parent().addClass("alpha-studio-popup")}))}(jQuery);