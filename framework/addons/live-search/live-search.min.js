"use strict";window.Wolmart||(window.Wolmart={}),function(e){Wolmart.liveSearch=function(a,s){e.fn.devbridgeAutocomplete&&(s=void 0===s?e(".search-wrapper"):s).each((function(){var a=e(this),s=a.find(".live-search-list"),t=a.find(".cat"),r=a.find('input[name="post_type"]').val(),n=a.find("select.all-cats").length,i=wolmart_vars.ajax_url+"?action=wolmart_ajax_search&nonce="+wolmart_vars.nonce,l=i+(r?"&post_type="+r:"");if(a.hasClass("search-fullscreen")&&(a.find('input[type="search"]').on("focus input",(function(){if(!a.hasClass("active-ready")){a.parent().height(a.height()),a.addClass("active-ready"),e("body").addClass("overflow-hidden"),e(".page-wrapper").addClass("fullscreen-search");var s=a.find(".slider-wrapper").data("slider");s&&s.update()}})),a.find(".close-btn").on("click",(function(){a.parent().css("height",""),a.removeClass("active-ready"),e("body").removeClass("overflow-hidden"),e(".page-wrapper").removeClass("fullscreen-search")}))),a.find('input[type="search"]').devbridgeAutocomplete({minChars:3,appendTo:s,triggerSelectOnValidInput:!1,serviceUrl:l,onSearchStart:function(){a.addClass("skeleton-body"),s.children().eq(0).html(wolmart_vars.skeleton_screen?'<div class="skel-pro-search"></div><div class="skel-pro-search"></div><div class="skel-pro-search"></div>':'<div class="w-loading"><i></i></div>').css({position:"relative",display:"block"})},onSelect:function(e){-1!=e.id&&(window.location.href=e.url)},onSearchComplete:function(e,t){t.length||s.children().eq(0).hide(),a.hasClass("search-fullscreen")&&a.find('input[type="search"]').off("blur.autocomplete")},beforeRender:function(a){e(a).removeAttr("style")},formatResult:function(a,s){var t="("+e.Autocomplete.utils.escapeRegExChars(s)+")",n="";return a.img&&(n+='<img class="search-image" src="'+a.img+'">'),n+='<div class="search-info">',n+='<div class="search-name">'+(r?"":"<strong>"+a.type+":</strong> ")+a.value.replace(new RegExp(t,"gi"),"<strong>$1</strong>")+"</div>",a.price&&(n+='<span class="search-price">'+a.price+"</span>"),n+="</div>"}}),t.length){var o=a.find('input[type="search"]').devbridgeAutocomplete();t.on("change",(function(e){t.val()&&"0"!=t.val()||""==t.val()?o.setOptions({serviceUrl:i+(n?"&post_type="+(a.find("option:selected").parent("optgroup").length?a.find("option:selected").parent().data("type"):""):r?"&post_type="+r:"")+"&cat="+t.val()}):o.setOptions({serviceUrl:l}),o.hide(),o.onValueChange()}))}}))},e(window).on("wolmart_complete",Wolmart.liveSearch)}(jQuery);