!function(e,t){"use strict";var o=window.WolmartAdmin||{},a={install_plugins:function(e){(new s).init(e)},select_page_builder:function(e){(new s).builderSelect(e)},optimize_resources:function(e){o.OptimizeWizard.optimizeResources(e)},install_plugin:function(e){(new s).demoInit(e)}};function s(){var e,o,a=0,s="",i="";function n(e){if("object"==typeof e&&void 0!==e.message)if(o.find("span").text(e.message),void 0!==e.url)e.hash==i?(o.find("span").text("undefined"==typeof wolmart_setup_wizard_params?wolmart_optimize_wizard_params.texts.failed:wolmart_setup_wizard_params.texts.failed),o.hasClass("demo-plugin")&&(o.removeClass("installing"),o.text("Failed")),l()):(i=e.hash,t.post(e.url+"&activate-multi=true",e,(function(t){r(),o.find("span").text(e.message)})).fail(n));else if(void 0!==e.done){if(o.hasClass("demo-plugin")){o.removeClass("installing");var a=t('[data-slug="'+o.data("slug")+'"]').addClass("installed").text("Installed");setTimeout((function(){a.closest("li").fadeOut(400)}),100),t(".wolmart-install-demo .plugins-used [data-plugin]").filter((function(){return"none"!=this.style.display&&null==this.querySelector(".demo-plugin.installed")})).length?t(".wolmart-install-demo .wolmart-install-section").slideUp():t(".wolmart-install-demo .wolmart-install-section").slideDown()}l()}else l();else o.hasClass("demo-plugin")&&(o.removeClass("installing"),o.text("Failed")),o.find("span").text("undefined"==typeof wolmart_setup_wizard_params?wolmart_optimize_wizard_params.texts.ajax_error:wolmart_setup_wizard_params.texts.ajax_error),l()}function r(){s&&t.post(ajaxurl,{action:"undefined"==typeof wolmart_setup_wizard_params?"wolmart_optimize_wizard_plugins":"wolmart_setup_wizard_plugins",wpnonce:"undefined"==typeof wolmart_setup_wizard_params?wolmart_optimize_wizard_params.wpnonce:wolmart_setup_wizard_params.wpnonce,slug:s},n).fail(n)}function l(){var i=!1;o&&(o.data("done_item")||(a++,o.data("done_item",1)),o.find(".spinner").css("visibility","hidden")),t(".wolmart-plugins>li").each((function(){t(this).hasClass("installing")&&(""==s||i?(s=t(this).data("slug"),o=t(this),r(),i=!1):t(this).data("slug")==s&&(i=!0))})),a>=t(".wolmart-plugins>li.installing").length&&e()}return{init:function(o){t(".wolmart-plugins > li").each((function(){t(this).find('input[type="checkbox"]').is(":checked")&&t(this).addClass("installing")})),e=function(){t(o).attr("href")&&"#"!=t(o).attr("href")?window.location.href=o.href:window.location.reload()},l()},demoInit:function(t){t&&t.addClass("installing"),s=t.data("slug"),o=t,r(),e=function(){}},builderSelect:function(e){var o,a="elementor";t('.wolmart-page-builder input[type="radio"]').each((function(){this.checked&&(a=t(this).closest("li").data("slug"))})),o=t('.wolmart-page-builder input[type="checkbox"]').is(":checked");var s={action:"wolmart_setup_wizard_page_builder",builder:a,uninstall:o,wpnonce:"undefined"==typeof wolmart_setup_wizard_params?wolmart_optimize_wizard_params.wpnonce:wolmart_setup_wizard_params.wpnonce};t.ajax({url:ajaxurl,data:s,type:"post",success:function(){var t=e.getAttribute("href");t&&"#"!=t?window.location.href=t:window.location.reload()}}).fail((function(){})).always((function(){}))}}}var i={init:function(){this.initUI()},initUI:function(){t(document.body).on("click",".button-next",(function(e){var o=e.currentTarget,s=t(o);if(i.loadingButton(e.currentTarget)){if(!s.data("callback")||void 0===a[s.data("callback")])return!0;e.preventDefault(),a[s.data("callback")](o)}return!1})).on("click",".wolmart-card-header",(function(e){var o=t(e.currentTarget),a=o.parent();a.toggleClass("active"),a.hasClass("active")?o.siblings(".wolmart-card-list").slideDown():o.siblings(".wolmart-card-list").slideUp()})).on("click",".demo-plugin",(function(e){if(!t(this).data("callback")||void 0===a[t(this).data("callback")])return!0;e.preventDefault(),a[t(this).data("callback")](t(this))}))},loadingButton:function(e){var o=t(e);if("yes"==o.data("done-loading"))return!1;var a=o.text(),s=o.outerWidth(),i="⡀⡀⡀⡀⡀⡀⡀⡀⡀⡀⠄⠂⠁⠁⠂⠄",n=!1;o.css("width",s),o.addClass("button-loading");var r=o.is("input")||o.is("button")?"val":"text";o[r](i),o.data("done-loading","yes");var l=[0,1,2];return function e(){if(!n){for(var t="",a=0;a<l.length;a++)l[a]=l[a]+1,l[a]>=16&&(l[a]=0),t+=i.charAt(l[a]);o[r](t),setTimeout((function(){e()}),60)}}(),{done:function(){n=!0,o[r](a),o.removeClass("button-loading"),o.attr("disabled",!1)}}}},n={init:function(){this.initUI(),t(".wolmart-used-elements-form").length&&this.loadWidgets(),this.deactivatePlugins(".installed-plugins > li a"),this.sharePlugins()},initUI:function(){t(document.body).on("click",".checkbox-toggle",(function(e){var o=t(this);o.find(".toggle").hasClass("none")?(o.find(".toggle").removeClass("none").addClass("all"),o.closest(".wolmart-card").find(".element:not(:disabled)").prop("checked",!0)):(o.find(".toggle").removeClass("all").addClass("none"),o.closest(".wolmart-card").find(".element:not(:disabled)").prop("checked",!1)),e.stopImmediatePropagation()})).on("click",".element",(function(e){var o=t(this),a=!0,s=!0;o.closest(".wolmart-card").find(".element:not(:disabled)").each((function(){return this.checked?s=!1:a=!1,s||a})),o.closest(".wolmart-card").find(".toggle").removeClass("all none").addClass(a?"all":s?"none":"")})).on("click",".wolmart-resource-steps .step > a",(function(e){var o=t(this),a=o.parent().siblings().find(".active");a.removeClass("active"),o.addClass("active"),t(a.attr("href")).css("display","none"),t(o.attr("href")).css("display","block"),e.preventDefault()})).on("click",".step-navs > a",(function(e){var o=t(this),a=t(".wolmart-resource-steps .step > a"),s=o.data("step");t(a[Number(s)-1]).trigger("click")}))},loadWidgets:function(){t.ajax({url:ajaxurl,data:{action:"wolmart_optimize_wizard_resources_load",wpnonce:wolmart_optimize_wizard_params.wpnonce},type:"post",success:function(e){t(".wolmart-used-elements-form .wolmart-used-resources").html(e)}}).fail((function(){t(".wolmart-used-elements-form .wolmart-used-resources").html(wolmart_optimize_wizard_params.texts.loading_failed)}))},optimizeResources:function(e){var o=[],a=[],s=[],i=[];t('.wolmart-used-elements-form .wolmart-card:not(.shortcode) input[type="checkbox"]').each((function(){var e=this.getAttribute("name");e&&e.startsWith("used[")&&(e=e.match(/used\[([\w|\d|\-|\_]*)\]/i))&&e[1]&&(this.checked?o.push(e[1]):a.push(e[1]))})),t('.wolmart-used-elements-form .wolmart-card.shortcode input[type="checkbox"]').each((function(){var e=this.getAttribute("name");e&&e.startsWith("used_shortcode[")&&(e=e.match(/used_shortcode\[([\w|\d|\-|\_]*)\]/i))&&e[1]&&(this.checked?s.push(e[1]):i.push(e[1]))}));var n={action:"wolmart_optimize_wizard_resources_optimize",used:o,unused:a,used_shortcode:s,unused_shortcode:i,resource_disable_gutenberg:t('.wolmart-used-elements-form [name="resource_disable_gutenberg"]')[0].checked,resource_disable_wc_blocks:t('.wolmart-used-elements-form [name="resource_disable_wc_blocks"]')[0].checked,resource_disable_emojis:t('.wolmart-used-elements-form [name="resource_disable_emojis"]')[0].checked,resource_disable_jq_migrate:t('.wolmart-used-elements-form [name="resource_disable_jq_migrate"]')[0].checked,resource_jquery_footer:t('.wolmart-used-elements-form [name="resource_jquery_footer"]')[0].checked,resource_merge_stylesheets:t('.wolmart-used-elements-form [name="resource_merge_stylesheets"]')[0].checked,resource_critical_css:t('.wolmart-used-elements-form [name="resource_critical_css"]')[0].checked,wpnonce:wolmart_optimize_wizard_params.wpnonce};t('.wolmart-used-elements-form [name="resource_disable_elementor"]').length&&(n.resource_disable_elementor=t('.wolmart-used-elements-form [name="resource_disable_elementor"]')[0].checked),t('.wolmart-used-elements-form [name="resource_disable_fontawesome"]').length&&(n.resource_disable_fontawesome=t('.wolmart-used-elements-form [name="resource_disable_fontawesome"]')[0].checked),t('.wolmart-used-elements-form [name="resource_disable_dokan"]').length&&(n.resource_disable_dokan=t('.wolmart-used-elements-form [name="resource_disable_dokan"]')[0].checked),t.ajax({url:ajaxurl,data:n,type:"post",success:function(){var t=e.getAttribute("href");t&&"#"!=t?window.location.href=t:window.location.reload()}}).fail((function(){})).always((function(){}))},deactivatePlugins:function(e){t(e).on("click",(function(e){t.ajax({url:ajaxurl,data:{action:"wolmart_optimize_wizard_plugins_deactivate",url:t(this).attr("href"),wpnonce:wolmart_optimize_wizard_params.wpnonce},type:"post",success:function(){window.location.reload()}}).fail((function(){})).always((function(){})),e.preventDefault()}))},sharePlugins:function(){var e;t(".btn-plugins").on("click",(function(o){e="",t(".installed-plugins > li:not(:first-child) label").each((function(t){e+=(0==t?"":",")+this.innerHTML+"(v"+this.getAttribute("data-version")+")"})),t("#share_plugins")[0].checked&&t.post(wolmart_optimize_wizard_params.url_plugin_list_add,{plugins:e,domain:window.location.origin})}))}},r={init:function(){this.initUI(),this.initPluginsUI(),this.initDemoImportUI(),this.initDemoRemove(),this.dummy_index=0,this.dummy_count=0,this.dummy_process="import_start",this.subpages_index=0,this.subpages_count=0,this.subpages_process="import_start"},initUI:function(){t(".button-load-plugins").on("click",(function(e){e.preventDefault(),t(this).hide().closest(".wolmart-plugins").children(".hidden").hide().fadeIn().removeClass("hidden")})),t(".button-upload").on("click",(function(o){var a,s;o.preventDefault(),void 0===a?((a=e.media.frames.file_frame=e.media({title:"Upload Logo",button:{text:"Select Logo"},multiple:!1})).on("select",(function(){s=a.state().get("selection").first().toJSON(),t(".site-logo").attr("src",s.url),t("#new_logo_id").val(s.id)})),a.open()):a.open()}))},initPluginsUI:function(){t(".wolmart-plugins input").on("change",(function(){var e=0;e+=t(".wolmart-plugins [data-slug=elementor] input").is(":checked")?1:0,e+=t(".wolmart-plugins [data-slug=visualcomposer] input").is(":checked")?1:0,e+=t(".wolmart-plugins [data-slug=js_composer] input").is(":checked")?1:0,t(".use-multiple-editors").css("display",e>=2?"inline-block":"none")}))},initDemoImportUI:function(){if(t("#theme-install-demos").length&&t(".wolmart-install-editors > *").length){t(document.body).on("click",".wolmart-install-demos .theme-wrapper",(function(a){if(!a.target.classList.contains("demo-preview"))if(t(".wolmart-remove-demo .button").length&&!t(".wolmart-remove-demo .button").prop("disabled")&&window.confirm(e.i18n.__("We recommend to remove installed demo before importing a new demo.","wolmart")))t(".btn-remove-demo-contents").trigger("click");else{a.preventDefault(),t("#wolmart-install-options").show();var s=t(this),i=s.closest(".wolmart-install-demos"),n=i.find(".wolmart-install-demo"),r=s.find(".plugins-used").data("editor");n.find(".theme-screenshot").attr("src",s.find(".theme-screenshot").attr("src").replace("images/demo-","images/demo-lg-").replace("images/rtl-demo-","images/rtl-demo-lg-")),n.find(".theme-link").attr("href",s.find(".theme-name").attr("data-live-url")),n.find(".wolmart-install-demo-header h2").html('<span class="wolmart-mini-logo"></span>'+wolmart_setup_wizard_params.texts.demo_import+" - "+s.find(".theme-name").text()).data("title",s.find(".theme-name").text()),n.find(".wolmart-install-editors>label").addClass("d-none"),n.find(".plugins-used").remove(),n.find(".wolmart-install-notice").remove(),t("#wolmart-install-demo-type").val(s.find(".theme-name").attr("id")),t("#import-status .wolmart-installing-options>div").removeClass("prepare installing installed"),t("#import-status .import-result").html(""),s.find(".wolmart-install-notice").length&&s.find(".wolmart-install-notice").clone().insertBefore(i.find(".wolmart-install-section")),s.find(".plugins-used").length&&s.find(".plugins-used").clone().insertBefore(i.find(".wolmart-install-section")),o(),r.forEach((function(e){n.find("#wolmart-"+e+"-demo").parent().removeClass("d-none")}));n.find('[for="wolmart-js_composer-demo"]');t.magnificPopup.open({items:{src:".wolmart-install-demo"},type:"inline",mainClass:"mfp-with-zoom",zoom:{enabled:!0,duration:300},callbacks:{open:function(){var e=window.innerWidth-document.body.clientWidth;t(document.body).hasClass("rtl")&&t("html").css({"margin-left":e,"margin-right":0})},afterClose:function(){t("html").css({"margin-left":0,"margin-right":0})}}})}}));var o=function(){t(".wolmart-install-demo .plugins-used [data-plugin]").filter((function(){return"none"!=this.style.display&&null==this.querySelector(".demo-plugin.installed")})).length||t(".wolmart-install-demo .wolmart-install-notice").length?t(".wolmart-install-demo .wolmart-install-section").slideUp():t(".wolmart-install-demo .wolmart-install-section").slideDown()};t(".wolmart-install-editors input").on("change",o),t(".wolmart-import-yes").on("click",(function(){if(confirm(wolmart_setup_wizard_params.texts.confirm_override)){r.addAlertLeavePage();var e=t("#wolmart-install-demo-type").val(),o=e,a="elementor";t("#wolmart-visualcomposer-demo").is(":checked")?(o="vc-"+e,a="vc"):t("#wolmart-js_composer-demo").is(":checked")&&(o="wpb-"+e,a="wpb");var s={demo:e,demo_slug:o,builder:a,import_options:t("#wolmart-import-options").is(":checked"),reset_menus:t("#wolmart-reset-menus").is(":checked"),reset_widgets:t("#wolmart-reset-widgets").is(":checked"),import_dummy:t("#wolmart-import-dummy").is(":checked"),import_widgets:t("#wolmart-import-widgets").is(":checked"),import_subpages:t("#wolmart-import-subpages").is(":checked"),override_contents:t("#wolmart-override-contents").is(":checked"),dummy_action:t(this).hasClass("alternative")?"wolmart_import_dummy_step_by_step":"wolmart_import_dummy"};if(s.demo){t("#import-status .import-result").html("");var i={action:"wolmart_download_demo_file",demo:o,wpnonce:wolmart_setup_wizard_params.wpnonce};t.post(ajaxurl,i,(function(e){try{e=t.parseJSON(e)}catch(e){}e&&e.process&&"success"==e.process?r.wolmart_import_options(s):e&&e.process&&"error"==e.process?r.wolmart_import_failed(s,e.message):r.wolmart_import_failed(s)})).fail((function(e){r.wolmart_import_failed(s)})),s.import_options&&t(".wolmart-installing-options .wolmart-import-options").addClass("prepare"),s.import_dummy&&t(".wolmart-installing-options .wolmart-import-dummy").addClass("prepare"),s.reset_menus&&t(".wolmart-installing-options .wolmart-reset-menus").addClass("prepare"),s.reset_widgets&&t(".wolmart-installing-options .wolmart-reset-widgets").addClass("prepare"),s.import_widgets&&t(".wolmart-installing-options .wolmart-import-widgets").addClass("prepare"),s.import_subpages&&t(".wolmart-installing-options .wolmart-import-subpages").addClass("prepare"),t(".wolmart-install-demo .wolmart-install-demo-header h2").html('<span class="wolmart-mini-logo"></span>'+wolmart_setup_wizard_params.texts.installing+" "+t("#"+e).html()).addClass("text-left"),t("#wolmart-install-options").hide()}}}))}},alertLeavePage:function(e){return e.returnValue=wolmart_setup_wizard_params.texts.leave_confirm},addAlertLeavePage:function(){t(".wolmart-import-yes.btn-primary").attr("disabled","disabled"),t(".mfp-bg, .mfp-wrap").off("click"),t(window).on("beforeunload",this.alertLeavePage)},removeAlertLeavePage:function(){t(".wolmart-import-yes.btn-primary").prop("disabled",!1),t(".mfp-bg, .mfp-wrap, .mfp-close").on("click",(function(e){t(e.target).is(".mfp-wrap .mfp-content *:not(.mfp-close)")||(e.preventDefault(),t.magnificPopup.close())})),t(window).off("beforeunload",this.alertLeavePage)},showImportMessage:function(e,o){o&&(o.startsWith("success")&&(o=o.slice(7)),o.startsWith("error")&&(o=o.slice(5)),o&&t("#import-status .import-result").html(o))},wolmart_import_options:function(e){if(e.demo)if(e.import_options){var o={action:"wolmart_import_options",demo:e.demo_slug,wpnonce:wolmart_setup_wizard_params.wpnonce};t(".wolmart-installing-options .wolmart-import-options").addClass("installing"),t.post(ajaxurl,o,(function(o){t(".wolmart-installing-options .wolmart-import-options").removeClass("installing").addClass("installed"),r.wolmart_reset_menus(e)})).fail((function(o){t(".wolmart-installing-options .wolmart-import-options").removeClass("installing"),r.wolmart_reset_menus(e)}))}else r.wolmart_reset_menus(e);else r.removeAlertLeavePage()},wolmart_reset_menus:function(e){if(e.demo)if(e.reset_menus){var o={action:"wolmart_reset_menus",import_shortcodes:e.import_shortcodes,wpnonce:wolmart_setup_wizard_params.wpnonce};t(".wolmart-installing-options .wolmart-reset-menus").addClass("installing"),t.post(ajaxurl,o,(function(o){t(".wolmart-installing-options .wolmart-reset-menus").removeClass("installing").addClass("installed"),r.wolmart_reset_widgets(e)})).fail((function(o){t(".wolmart-installing-options .wolmart-reset-menus").removeClass("installing"),r.wolmart_reset_widgets(e)}))}else r.wolmart_reset_widgets(e);else r.removeAlertLeavePage()},wolmart_reset_widgets:function(e){if(e.demo)if(e.reset_widgets){var o={action:"wolmart_reset_widgets",wpnonce:wolmart_setup_wizard_params.wpnonce};t(".wolmart-installing-options .wolmart-reset-widgets").addClass("installing"),t.post(ajaxurl,o,(function(o){t(".wolmart-installing-options .wolmart-reset-widgets").removeClass("installing").addClass("installed"),r.wolmart_import_dummy(e)})).fail((function(o){t(".wolmart-installing-options .wolmart-reset-widgets").removeClass("installing"),r.wolmart_import_dummy(e)}))}else r.wolmart_import_dummy(e);else r.removeAlertLeavePage()},wolmart_import_dummy:function(e){if(e.demo)if(e.import_dummy){var o={action:e.dummy_action,process:"import_start",demo:e.demo_slug,override_contents:e.override_contents,wpnonce:wolmart_setup_wizard_params.wpnonce};this.dummy_index=0,this.dummy_count=0,this.dummy_process="import_start",r.wolmart_import_dummy_process(e,o),t(".wolmart-installing-options .wolmart-import-dummy").addClass("installing")}else r.wolmart_import_widgets(e);else r.removeAlertLeavePage()},wolmart_import_dummy_process:function(e,o){t.post(ajaxurl,o,(function(a){if(a&&/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))if("complete"!=(a=t.parseJSON(a)).process){var s={action:o.action,wpnonce:wolmart_setup_wizard_params.wpnonce};a.process&&(s.process=a.process),a.index&&(s.index=a.index),s.demo=e.demo_slug,s.override_contents=e.override_contents,r.wolmart_import_dummy_process(e,s),this.dummy_index=a.index,this.dummy_count=a.count,this.dummy_process=a.process,this.dummy_count&&this.dummy_index&&t("#import-status .wolmart-import-dummy > span:last-child").html("("+Math.min(this.dummy_index/this.dummy_count*100,100).toFixed(0)+"%)")}else"error"==a.process?r.wolmart_import_failed(e):(r.wolmart_import_widgets(e),t(".wolmart-installing-options .wolmart-import-dummy").removeClass("installing").addClass("installed"));else t(".wolmart-installing-options .wolmart-import-dummy").removeClass("installing"),r.wolmart_import_failed(e)})).fail((function(t){var a;"wolmart_import_dummy"==o.action?r.wolmart_import_failed(e):this.dummy_index<this.dummy_count?((a={action:o.action,wpnonce:wolmart_setup_wizard_params.wpnonce}).process=this.dummy_process,a.index=++this.dummy_index,a.demo=e.demo,r.wolmart_import_dummy_process(e,a)):((a={action:o.action,wpnonce:wolmart_setup_wizard_params.wpnonce}).process=this.dummy_process,a.demo=e.demo,r.wolmart_import_dummy_process(e,a))}))},wolmart_import_widgets:function(e){if(e.demo)if(e.import_widgets){var o={action:"wolmart_import_widgets",demo:e.demo_slug,wpnonce:wolmart_setup_wizard_params.wpnonce};t(".wolmart-installing-options .wolmart-import-widgets").addClass("installing"),t.post(ajaxurl,o,(function(o){o&&(t(".wolmart-installing-options .wolmart-import-widgets").removeClass("installing").addClass("installed"),r.wolmart_import_subpages(e))}))}else r.wolmart_import_subpages(e);else r.removeAlertLeavePage()},wolmart_import_subpages:function(e){if(e.demo)if(e.import_subpages){var o={action:"wolmart_import_subpages",process:"import_start",demo:"subpages",override_contents:!0,wpnonce:wolmart_setup_wizard_params.wpnonce,builder:e.builder};this.subpages_index=0,this.subpages_count=0,this.subpages_process="import_start",r.wolmart_import_subpages_process(e,o),t(".wolmart-installing-options .wolmart-import-subpages").addClass("installing")}else r.wolmart_import_finished(e);else r.removeAlertLeavePage()},wolmart_import_subpages_process:function(e,o){t.post(ajaxurl,o,(function(a){if(a&&/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))if("error"==(a=t.parseJSON(a)).process)r.wolmart_import_failed(e);else if("complete"!=a.process){var s={action:o.action,wpnonce:wolmart_setup_wizard_params.wpnonce,builder:e.builder};a.process&&(s.process=a.process),a.index&&(s.index=a.index),s.demo=e.demo_slug,s.override_contents=e.override_contents,r.wolmart_import_subpages_process(e,s),this.subpages_index=a.index,this.subpages_count=a.count,this.subpages_process=a.process,this.subpages_count&&this.subpages_index&&t("#import-status .wolmart-import-subpages > span:last-child").html("("+Math.min(this.subpages_index/this.subpages_count*100,100).toFixed(0)+"%)")}else t(".wolmart-installing-options .wolmart-import-subpages").removeClass("installing").addClass("installed"),r.wolmart_import_finished(e);else t(".wolmart-installing-options .wolmart-import-subpages").removeClass("installing").addClass("installed"),r.wolmart_import_finished(e)})).fail((function(t){var a;"wolmart_import_subpages"==o.action?r.wolmart_import_failed(e):this.subpages_index<this.subpages_count?((a={action:o.action,wpnonce:wolmart_setup_wizard_params.wpnonce}).process=this.subpages_process,a.index=++this.subpages_index,a.demo=e.demo,r.wolmart_import_subpages_process(e,a)):((a={action:o.action,wpnonce:wolmart_setup_wizard_params.wpnonce}).process=this.subpages_process,a.demo=e.demo,r.wolmart_import_subpages_process(e,a))}))},wolmart_delete_tmp_dir:function(e){var o={action:"wolmart_delete_tmp_dir",demo:e,wpnonce:wolmart_setup_wizard_params.wpnonce};t.post(ajaxurl,o,(function(e){}))},wolmart_import_failed:function(e,o){r.wolmart_delete_tmp_dir(e.demo_slug),o&&r.showImportMessage(e.demo,o),r.removeAlertLeavePage(),t(".wolmart-install-demo-header h2").html('<span class="wolmart-mini-logo"></span>'+wolmart_setup_wizard_params.texts.demo_import+" - "+t(".wolmart-install-demo-header h2").data("title")+wolmart_setup_wizard_params.texts.install_failed),t("#wolmart-install-options").show(),t("#import-status .wolmart-installing-options>div").removeClass("prepare installing installed")},wolmart_import_finished:function(e){e.demo?(r.wolmart_delete_tmp_dir(e.demo_slug),setTimeout((function(){t("#wp-admin-bar-view-site").length?r.showImportMessage(e.demo,'<a href="'+t("#wp-admin-bar-view-site a").attr("href")+'" target="_blank">'+wolmart_setup_wizard_params.texts.visit_your_site+"</a>"):t("#current_site_link").length?r.showImportMessage(e.demo,'<a href="'+t("#current_site_link").val()+'" target="_blank">'+wolmart_setup_wizard_params.texts.visit_your_site+"</a>"):t(".wolmart-installing-options>div"),t(".wolmart-install-demo .wolmart-demo-install").html(t("#"+e.demo).html()+wolmart_setup_wizard_params.texts.install_finished),r.removeAlertLeavePage(),t(".wolmart-remove-demo-title.mfp-hide").removeClass("mfp-hide").hide().slideDown(),t(".wolmart-remove-demo .button").prop("disabled",!1)}),300)):removeAlertLeavePage()},initDemoRemove:function(){t(".btn-remove-demo-contents").on("click",(function(e){t(".wolmart-remove-demo .remove-status").html(""),t.magnificPopup.open({items:{src:".wolmart-remove-demo"},type:"inline",mainClass:"mfp-with-zoom",zoom:{enabled:!0,duration:300}})})),t(".wolmart-remove-demo label:first-child input").on("change",(function(e){t(this).is(":checked")?t(this).closest(".wolmart-remove-demo").find('input[type="checkbox"]').prop("checked",!0):t(this).closest(".wolmart-remove-demo").find('input[type="checkbox"]').prop("checked",!1)}));var e=function(o,a){var s=o.shift();if(void 0!==s){t(".wolmart-remove-demo .button").prop("disabled",!0);var i="Other Contents";t('.wolmart-remove-demo input[value="'+s+'"]').length&&(i=t('.wolmart-remove-demo input[value="'+s+'"]').parent().text());var n='<h5 class="wolmart-installing-options"><span class="installing"><span class="wolmart-loading"></span> Removing '+i+"</span></h5>";t(".wolmart-remove-demo .remove-status").html(n);var r={action:"wolmart_sw_remove_demo",wpnonce:wolmart_setup_wizard_params.wpnonce};-1===s.indexOf("widgets")&&-1===s.indexOf("options")?(r.type="posts",r.post_type=s):r.type=s,t.ajax({url:ajaxurl,type:"POST",dataType:"JSON",data:r,success:function(t){t&&t.success&&e(o,a)},failure:function(){t(".wolmart-remove-demo .button").prop("disabled",!1),t(".wolmart-remove-demo .remove-status").html("<h5>Removed failed. Please refresh and try again.</h5>")}})}else t(".wolmart-remove-demo .remove-status").html('<h5 class="success">Removed successfully.</h5>'),a?t(".wolmart-remove-demo .button").prop("disabled",!0).removeClass("btn-primary"):t(".wolmart-remove-demo .button").prop("disabled",!1).addClass("btn-primary")};t(".wolmart-remove-demo .button").on("click",(function(o){o.preventDefault();var a=[],s=!1;t(this).closest(".wolmart-remove-demo").find('input[type="checkbox"]:checked').each((function(){t(this).val()?a.push(t(this).val()):s=!0})),s&&a.push("other"),a.length&&e(a,s)}))}},l={init:function(){t("#wolmart_versions_table .theme-rollback").on("click",this.themeRollback),t("#wolmart_versions_table .plugin-rollback").on("click",this.pluginRollback)},doLoading:function(e){e.addClass("disabled"),e.closest(".run-tool").addClass("installing"),e.append('<span class="wolmart-loading"></span>')},endLoading:function(e){e.children(".wolmart-loading").remove(),e.closest(".run-tool").removeClass("installing"),e.removeClass("disabled")},themeRollback:function(o){var a=t(this);confirm("Do you want to really downgrade theme?")&&(l.doLoading(a),t.ajax({url:ajaxurl,type:"post",dataType:"JSON",data:{action:"wolmart_modify_theme_auto_updates",wpnonce:wolmart_version_control_params.wpnonce,version:t("#theme-versions").val()},success:function(t){1==t&&e.updates.ajax("update-theme",{slug:"wolmart",success:function(){l.endLoading(a),window.location.reload(!0)},error:function(e){l.endLoading(a),alert("failure")}})},failure:function(){}})),o.preventDefault()},pluginRollback:function(o){var a=t(this);confirm("Do you want to really downgrade plugin?")&&t.ajax({url:ajaxurl,type:"post",dataType:"JSON",data:{action:"wolmart_modify_plugin_auto_updates",wpnonce:wolmart_version_control_params.wpnonce,version:t("#plugin-versions").val()},success:function(t){1==t&&(l.doLoading(a),e.updates.ajax("update-plugin",{plugin:"wolmart-core/wolmart-core.php",slug:"wolmart-core",success:function(){l.endLoading(a),window.location.reload(!0)},error:function(e){l.endLoading(a),alert("failure")}}))},failure:function(){}}),o.preventDefault()}};o.Wizard=i,o.SetupWizard=r,o.OptimizeWizard=n,o.VersionControl=l,t(document).ready((function(){i.init(),n.init(),r.init(),l.init()}))}(wp,jQuery);