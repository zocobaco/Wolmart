!function(e,t,o){"use strict";o(document).ready((function(){!function(){if(window.wolmart_admin_vars&&wolmart_admin_vars.page_links)for(const t in wolmart_admin_vars.page_links)wolmart_admin_vars.page_links[t].is_panel?e.panel(t)&&e.panel(t).expanded.bind((function(o){o&&wolmart_admin_vars.page_links[t].url&&wolmart_admin_vars.page_links[t].url!=e.previewer.previewUrl()&&e.previewer.previewUrl.set(wolmart_admin_vars.page_links[t].url)})):e.section(t)&&e.section(t).expanded.bind((function(o){o&&wolmart_admin_vars.page_links[t].url&&wolmart_admin_vars.page_links[t].url!=e.previewer.previewUrl()&&e.previewer.previewUrl.set(wolmart_admin_vars.page_links[t].url)}))}(),function(){function e(){var e=o("#customize-control-cs_menu_labels #label-select").children("option"),t={};e.length&&e.map((function(){t[o(this).text()]=o(this).val()})),o("#customize-control-menu_labels input").val(JSON.stringify(t)),o("#customize-control-menu_labels input").trigger("change")}o(document.body).on("click","#customize-control-cs_new_menu_label .btn-add-label",(function(t){t.preventDefault();var n=function(){var e=o("#customize-control-menu_labels input").val();return e?JSON.parse(e):{}}(),a=o("#customize-control-cs_new_menu_label .label-text").val(),i=o("#customize-control-cs_new_menu_label .wolmart-color-picker").val();a&&i?null!=n[a]?alert("This label already exists. Please add another one."):(o("#customize-control-cs_menu_labels select").children().prop("selected",!1),o("#customize-control-cs_menu_labels select").append('<option value="'+i+'" selected>'+a+"</option>"),e(),o("#customize-control-cs_new_menu_label .label-text, #customize-control-cs_new_menu_label .wolmart-color-picker").val(""),o("#customize-control-cs_new_menu_label .wp-color-result").css("background-color",""),o("#customize-control-cs_menu_labels #label-select").trigger("change")):alert("Plase input label text and label color")})).on("click","#customize-control-cs_menu_labels .btn-change-label",(function(t){t.preventDefault();var n=o("#customize-control-cs_menu_labels .menu-label .label-text").val(),a=o("#customize-control-cs_menu_labels .menu-label .wolmart-color-picker").val();n&&a&&(o("#customize-control-cs_menu_labels select option:selected").val(a).text(n),e())})).on("click","#customize-control-cs_menu_labels .btn-remove-label",(function(t){t.preventDefault();var n=o("#customize-control-cs_menu_labels select option:selected").text(),a=o("#customize-control-cs_menu_labels select option:selected").val();n&&a&&(o("#customize-control-cs_menu_labels select option[value="+a+"]").remove(),e(),o("#customize-control-cs_menu_labels select option").eq(0).prop("selected",!0),o("#customize-control-cs_menu_labels #label-select").trigger("change"))})).on("change","#customize-control-cs_menu_labels #label-select",(function(e){e.preventDefault(),o("#customize-control-cs_menu_labels .label-text").val(o(this).find("option:selected").text()),o("#customize-control-cs_menu_labels .wolmart-color-picker").val(o(this).val()),o("#customize-control-cs_menu_labels .wp-color-result").css("background-color",o(this).val())}))}(),o(document.body).on("input","#customize-control-import_src input, #customize-control-export_src input",(function(e){o(this).closest("li").next().find("button").attr("disabled",!o(this).val())})).on("click","#wolmart-import-options",(function(e){e.preventDefault();var t=o("#customize-control-import_src input");if(t.val()){if(confirm("Are you sure to import another theme options? All current options will be overwritten."))if(!t[0].files||t[0].files.length<1)alert("Please select source file.");else{var n=new FormData;n.append("wp_customize","on"),n.append("action","wolmart_import_theme_options"),n.append("nonce",wolmart_customizer_vars.nonce),n.append("file",t[0].files[0]);var a=o(this);o(this).attr("disabled","disabled"),o.ajax({url:wolmart_customizer_vars.ajax_url,data:n,type:"post",contentType:!1,processData:!1,success:function(e){a.removeAttr("disabled"),alert("Theme options imported seccessfully. Please refresh this page to notice new options.")}}).fail((function(e){alert("Something went wrong while importing theme options."),console.log(e)}))}}else alert("Please select source file.")})).on("click","#wolmart-export-options",(function(e){if(e.preventDefault(),o("#customize-control-export_src input").val()){var t=o(this);t.attr("disabled","disabled"),o.ajax({url:wolmart_customizer_vars.ajax_url,data:{wp_customize:"on",action:"wolmart_export_theme_options",nonce:wolmart_customizer_vars.nonce,pathname:o("#customize-control-export_src input").val()},type:"post",success:function(e){t.removeAttr("disabled"),alert("Theme options exported seccessfully.")}}).fail((function(e){alert("Something went wrong while exporting theme options."),console.log(e)}))}else alert("Please input destination file pathname.")})).on("click","#wolmart-reset-options",(function(e){e.preventDefault(),confirm("Are you sure to reset all theme options?")&&(o(this).attr("disabled","disabled"),o.ajax({url:wolmart_customizer_vars.ajax_url,data:{wp_customize:"on",action:"wolmart_reset_theme_options",nonce:wolmart_customizer_vars.nonce},type:"post",success:function(e){window.location.reload()}}).fail((function(e){console.log(e)})))})),o(".customize-pane-child .accordion-section-title .panel-title").add(".customize-pane-child .customize-section-title h3").append('<a href="#" class="section-nav-status" title="Customize Navigator"><i class="w-icon-star"></i></a>'),o(".customizer-nav-item").each((function(){o("#sub-accordion-"+("section"==o(this).data("type")?"section":"panel")+"-"+o(this).data("target")+" .section-nav-status").addClass("active")})),o(document.body).on("click",".navigator-toggle",(function(e){e.preventDefault(),o(this).closest(".customizer-nav").toggleClass("active")})).on("click",".customizer-nav-item",(function(t){t.preventDefault(),e[o(this).data("type")](o(this).data("target")).focus()})).on("click",".section-nav-status",(function(t){var n=o(this);if(t.preventDefault(),!n.hasClass("disabled")){var a=n.closest(".customize-pane-child"),i="",c="",s="";if(a.hasClass("control-panel")?(c=a[0].id.replace("sub-accordion-panel-",""),s="panel"):(c=a[0].id.replace("sub-accordion-section-",""),s="section"),n.addClass("disabled").toggleClass("active"),n.hasClass("active")){if(n.closest(".customize-section-title").length){var l=n.closest(".customize-section-title"),r=l.find(".customize-action").text(),u=l.find("h3").text().replace(r,""),d=r.indexOf("â–¸");r=-1!=d?r.slice(d+1):""}else r="",u=n.closest(".panel-title").text();r&&(r+=" / "),i=r+u,o(".customizer-nav-items").append('<li><a href="#" data-target="'+c+'" data-type="'+s+'" class="customizer-nav-item">'+i+'</a><a href="#" class="customizer-nav-remove"><i class="w-icon-trash"></i></a></li>')}else o('.customizer-nav-items .customizer-nav-item[data-target="'+c+'"]').parent().fadeOut(200).addClass("hidden");n.removeClass("disabled"),e.state("saved").get()&&e.state("saved").set(!1)}})).on("click",".customizer-nav-remove",(function(t){t.preventDefault();var n=o(this).closest("li"),a=n.children(".customizer-nav-item");n.fadeOut(200).addClass("hidden"),o("#sub-accordion-"+("section"==a.data("type")?"section":"panel")+"-"+a.data("target")+" .section-nav-status").removeClass("active"),e.state("saved").get()&&e.state("saved").set(!1)})).on("click","#customize-save-button-wrapper #save",(function(){var e={};o(".customizer-nav-items li:not(.hidden) .customizer-nav-item").each((function(){e[o(this).data("target")]=[o(this).text(),o(this).data("type")]})),o.ajax({url:wolmart_customizer_vars.ajax_url,data:{wp_customize:"on",action:"wolmart_save_customize_nav",nonce:wolmart_customizer_vars.nonce,navs:e},type:"post",dataType:"json",success:function(e){}})})),function(){var t;function n(e){var n=o(this),a=n.get(0).getBoundingClientRect(),i=o(".customizer-radio-image-preview"),c=n.data("image")?n.data("image"):n.find("img").attr("src");if(c)(i=o(".customizer-radio-image-preview:not('.customizer-panel-milestone')")).children("img").attr("src",c);else{var s=n.attr("id");i=o('.customizer-panel-milestone[data-target="'+s+'"]')}clearTimeout(t),t=setTimeout((function(){var e=o("#customize-controls").get(0).getBoundingClientRect().width+20,t=parseInt(a.top+a.height/2);t<i.outerHeight()/2+20?t=i.outerHeight()/2+20:t+i.outerHeight()/2>window.innerHeight-20&&(t=window.innerHeight-i.outerHeight()/2-20),o(document.body).hasClass("rtl")?i.css({right:e,top:t,"margin-top":i.outerHeight()/-2}):i.css({left:e,top:t,"margin-top":i.outerHeight()/-2}),i.show()}),c?300:0)}function a(){clearTimeout(t),o(".customizer-radio-image-preview").hide().find("img").attr("src","")}o(document.body).on("click",".customizer-nav-home",(function(t){o(".customizer-nav-item").removeClass("active"),e.section.each((function(e){e.expanded()&&e.collapse()})),setTimeout((function(){e.panel.each((function(e){e.expanded()&&e.collapse()}))}),100)})).on("mouseenter",".customizer-radio-image-preview",(function(e){o(this).show()})).on("mouseleave",".customizer-radio-image-preview",(function(e){o(this).hide()})),Object.entries(wolmart_customizer_vars.tooltips).forEach((([e,t])=>{o(document.body).on("mouseenter",t,n).on("mouseleave",t,a)}))}(),function(){var e=location.href,o=e.search("#");if(0<o){var n=e.substr(o+1);if(void 0===t.customize.section(n))return;setTimeout((function(){t.customize.section(n).focus()}),2e3)}}(),o(document.body).on("click",(function(e){o(e.target).hasClass("customizer-nav-item")||(o(".customize-control-title.focused").removeClass("focused"),o(".focused[tabindex]").removeClass("focused"))})),o("input.wolmart-color-picker").wpColorPicker()})),e&&e.controlConstructor&&e.controlConstructor.background?e.controlConstructor.background=e.controlConstructor.background.extend({initKirkiControl:function(){var e=this,o=e.setting._value,n=e.container.find(".kirki-color-control");_.isUndefined(o["background-image"])&&(e.setting._value={"background-attachment":"","background-color":"","background-image":"","background-position":"","background-repeat":"","background-size":""}),(_.isUndefined(o["background-image"])||""===o["background-image"])&&(e.container.find(".background-wrapper > .background-repeat").hide(),e.container.find(".background-wrapper > .background-position").hide(),e.container.find(".background-wrapper > .background-size").hide(),e.container.find(".background-wrapper > .background-attachment").hide()),_.isUndefined(e.params.choices)||n.wpColorPicker(e.params.choices),setTimeout((function(){e.container.find(".wp-picker-clear").on("click",(function(){e.saveValue("background-color","")}))}),200),n.wpColorPicker({change:function(){setTimeout((function(){e.saveValue("background-color",n.val())}),100)}}),e.container.on("change",".background-repeat select",(function(){e.saveValue("background-repeat",jQuery(this).val())})).on("change click",".background-size input",(function(){e.saveValue("background-size",jQuery(this).val())})).on("change",".background-position select",(function(){e.saveValue("background-position",jQuery(this).val())})).on("change click",".background-attachment input",(function(){e.saveValue("background-attachment",jQuery(this).val())})).on("click",".background-image-upload-button",(function(o){var n=t.media({multiple:!1}).open().on("select",(function(){var t,o,a,i=n.state().get("selection").first(),c=i.toJSON().sizes.full.url;_.isUndefined(i.toJSON().sizes.medium)?_.isUndefined(i.toJSON().sizes.thumbnail)||(c=i.toJSON().sizes.thumbnail.url):c=i.toJSON().sizes.medium.url,t=i.toJSON().sizes.full.url,i.toJSON().id,i.toJSON().width,i.toJSON().height,""!==t&&e.container.find(".background-wrapper > .background-repeat, .background-wrapper > .background-position, .background-wrapper > .background-size, .background-wrapper > .background-attachment").show(),e.saveValue("background-image",t),o=e.container.find(".placeholder, .thumbnail"),a=e.container.find(".background-image-upload-remove-button"),o.length&&o.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+c+'" alt="" />'),a.length&&a.show()}));o.preventDefault()})).on("click",".background-image-upload-remove-button",(function(t){var o=e.container.find(".placeholder, .thumbnail"),n=e.container.find(".background-image-upload-remove-button");t.preventDefault(),e.saveValue("background-image",""),e.container.find(".background-wrapper > .background-repeat").hide(),e.container.find(".background-wrapper > .background-position").hide(),e.container.find(".background-wrapper > .background-size").hide(),e.container.find(".background-wrapper > .background-attachment").hide(),o.length&&o.removeClass().addClass("placeholder").html("No file selected"),n.length&&n.hide()}))}}):alert("Kirki plugin is not installed. Please install it first to take a full control."),t.customize.Control.prototype.focus=function(t){var n,a,i,c,s;n=this,i=function(){var t;n.extended(e.Panel)&&1<(s=n.sections()).length&&s.forEach((function(e){e.expanded()&&e.collapse()})),t=(n.extended(e.Panel)||n.extended(e.Section))&&n.expanded&&n.expanded()?n.contentContainer:n.container,0===(c=t.find(".control-focus:first")).length&&(c=t.find("input, select, textarea, button, object, a[href], [tabindex]").filter(":visible").first()),o(".customize-control-title.focused").removeClass("focused"),o(".focused[tabindex]").removeClass("focused");var a=o(".wp-full-overlay-sidebar-content");0===c.length?((c=t.find(".customize-control-title")).addClass("focused"),a.animate({scrollTop:a.scrollTop()+c.offset().top-75-e.notifications.container.outerHeight()},0)):c.attr("tabindex")&&!c.hasClass("kirki-react-select__input")?(c.addClass("focused"),a.animate({scrollTop:a.scrollTop()+c.offset().top-75-e.notifications.container.outerHeight()},0)):c.focus()},(t=t||{}).completeCallback?(a=t.completeCallback,t.completeCallback=function(){i(),a()}):t.completeCallback=i,e.state("paneVisible").set(!0),n.expand?n.expand(t):t.completeCallback()}}(wp.customize,wp,jQuery);